### **Faster RCNN 网络实现步骤（不包括分类和分数损失函数部分）**
---

**一 第一步**
 - 将图片输入的VGG16网络中，得到feature-map
 - 设置框的三种比例和三种尺寸，一个有九个框，遍历feature-map的每一个像素点，以其为中心生成anchor
 - 根据原始的图片尺寸，将anchor中没有超出尺寸大小的anchor标记出来
 
**二 第二步**
 - 计算每一个anchor和真实框的IOU
 - 然后根据IOU的大小，将anchor分成正负样本和无关样本，并选取正负样本个128个，若正样本不够，就用负样本的数量填充正样本的数量
 - 根据选取的样本计算偏移系数(平移和缩放)
 
 **三 第三步**
 - 将feature-map输入RNP网络中，得到网络预测的偏移系数，和对每一个anchor的分数(无效的anchor也包括其中)
 - 将RNP网络输出的量进行reshape，偏移系数为[1,None,4],分数为[1,None],其中之一连续问题
 
 **四 第四步**
  - 根据计算与预测的偏移系数和预测的分数和IOU进行loss计算
  
  **五 第五步**
  - 根据anchor和预测系数计算预测的anchor，并剔除高度或者宽度过小的框
  - 将预测的分数从高到低进行排列，并选出前N个，根据自己需要
  - 对预测框进行非极大值抑制，进一步过滤获选框
  - 将预测框与目标框进行IOU进行，以确定其预测的是那个物体
  - 计算目标框的真实系数
 
 **六 第六步**
 - 根据最终得到的anchor，在feature-map上进行抠图，然后送入ROI_pooling层，固定其输出大小，便于最后全连接层的处理
 
 
 -----
  以上便是对Faster-rcnn的一点理解，其中还有些不是很准的地方需要修改，等学透了之后，再来进行修改吧
  
